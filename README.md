# ‚ú® ipLance ‚ú® (immortal_poni) üêéüí®
<br>  
<br>  

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;![Immortal pony](https://media.tenor.com/tzGECrYAY20AAAAj/mlp-wave-mlp-pony-wave.gif)


## üêç –°—Ç—ç–∫
- FastAPI
- SQLAlchemy
- PostgreSQL
- Docker
- Uvicorn
- Pytest

---

## ‚ùï –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
#### python3.12 -m venv .venv
#### source .venv/bin/activate
#### pip install uv
#### uv pip install -r requirements.txt

---

## ‚ùó Run
### Docker
#### docker compose up --build
### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
#### uvicorn app.main:app --reload
–∏–ª–∏ —á–µ—Ä–µ–∑ python:
#### python -m uvicorn app.main:app --reload

---

# üí• API
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- host/docs

---

## üí© –¢–µ—Å—Ç—ã
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:
#### pytest
(!–ø—Ä–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤ –∞–ø–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Ä–µ–¥–∏—Å—É)

---

## üí§ –ú–∏–≥—Ä–∞—Ü–∏–∏
–ö–æ–º–∞–Ω–¥—ã –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º –ª–µ–∂–∞—Ç –≤ alembic/README

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
#### win - python .\app\scripts\safe_migrate.py
#### *nix - python app/scripts/safe_migrate.py

---

## üåü Supabase
#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
–ú–æ–¥—É–ª—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

app.core.database.py

#### –•—Ä–∞–Ω–∏–ª–∏—â–µ
–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –±–∞–∑–µ supabase.com –≤–º–µ—Å—Ç–µ —Å –±–¥.
–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –º–æ—É–¥–ª—å supabase.

https://supabase.com/dashboard/project/fbvupbfiavdrewoxrtwp

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –ø–∏—Å–∞—Ç—å brevnishko2 –∏–ª–∏ SerMichbboy

---

## üëΩ Redis
—Ä–µ–¥–∏—Å –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ redis-cloud.
–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ redis –µ—Å—Ç—å –ü–û:

#### sudo apt update
#### sudo apt install snapd
#### sudo snap install redisinsight

---

## üåµ Flower

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–¥–∞—á —Å–µ–ª–µ—Ä–∏  > host:5555

---

## üíå Celery
–í –º–æ–¥—É–ª–µ app/tasks/config_tasks –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

- celery_app.conf.beat_schedule - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
---
## üåú –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤ JWT (JSON Web Tokens) –¥–ª—è 
–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º. 
–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã:

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥: 

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ –≤—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ 
–∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è. –ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —Å 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º bcrypt —á–µ—Ä–µ–∑ passlib –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö. –í—Ö–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω 
–ø–æ –æ–¥–Ω–æ–º—É –∏–∑ —Ç—Ä—ë—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (username, email, phone), —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç
–≥–∏–±–∫–æ—Å—Ç—å.

#### –¢–æ–∫–µ–Ω—ã:

- Access Token: –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300 –º–∏–Ω—É—Ç), 
–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤. –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
(sub) –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (exp).
- Refresh Token: –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —Ç–æ–∫–µ–Ω (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π), –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å 
access token –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
- CSRF Token: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç 
–∞—Ç–∞–∫ CSRF. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –≤ —Ö—ç–¥–µ—Ä—Å—ã –∏ –≤
- –¥–∞–ª—å–Ω–µ–π—à–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—è —Ç–æ–∫–µ–Ω—ã X-CSRF-TOKEN —Å CSRF —Ç–æ–∫–µ–Ω–æ–º –≤ –∫—É–∫–∞—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

–¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ HTTP-only cookies —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ secure
–∏ samesite="lax", —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –ø–µ—Ä–µ—Ö–≤–∞—Ç —á–µ—Ä–µ–∑ XSS –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–µ–∂—Å–∞–π—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.
–¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ Redis (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ),
—á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è.
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º JWT —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º 
—Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (SECRET_KEY) –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (ALGORITHM).
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤: –≠–Ω–¥–ø–æ–∏–Ω—Ç /refresh –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å access token —Å 
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º refresh token, —Å–æ—Ö—Ä–∞–Ω—è—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É CSRF –∏ 
—á—ë—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.
–í—ã—Ö–æ–¥: –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ —Ç–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —á—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫, –∏ –≤—Å–µ cookies —É–¥–∞–ª—è—é—Ç—Å—è, 
–∑–∞–≤–µ—Ä—à–∞—è —Å–µ—Å—Å–∏—é.
–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∑–∞—â–∏—Ç—É, –≤–∫–ª—é—á–∞—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∫—É 
—Ç–æ–∫–µ–Ω–æ–≤ –∏ –∑–∞—â–∏—Ç—É –æ—Ç CSRF-–∞—Ç–∞–∫.

---
